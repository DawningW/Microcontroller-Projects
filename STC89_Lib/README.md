# STC89 软件库

**正在开发中, 请勿用于生产环境**

## 介绍

51单片机的寄存器操作虽然效率较高, 但寄存器数量太多根本记不住, 再加上官方可能已经放弃了STC89, 一直没有官方的库, 所以便想仿照STM32的标准外设库自己造一套轮子. 本库的目标是在方便开发的同时尽可能减少效率损失和库的大小, 除了对寄存器的封装, 本库还提供了开箱即用的软件实现的i2c, spi, pwm等外设 ~~(方便自己需要的时候直接复制粘贴而不是到CSDN挨个试那些根本用不了的代码)~~.

## 特性

- 主要支持STC89系列单片机, 但使用宏禁用STC89特性后可用于任意51单片机
- 主要支持Keil C51编译器, 也支持sdcc和IAR 8051
- 代码尽可能简化逻辑, 减少封装, 提高效率
- 注释完善, 里面甚至写有相关寄存器, 省去翻阅数据手册的时间
- 库可裁剪, 可通过宏控制某个模块是否编译
- 提供开箱即用的软件pwm, i2c, spi等外设实现

目前已实现的功能:

|文件名|功能|状态|
|-----|----|----|
|power|复位和省电模式|可用|
|wdt|看门狗|可用|
|gpio|GPIO|可用|
|exti|外部中断|可用|
|timer|定时器|可用|
|uart|通用异步收发器|可用|
|mem|扩展RAM|可用|
|isp|内部EEPROM操作|可用|
|soft_pwm|软件PWM|可用|
|soft_i2c|软件I2C|待测试|
|soft_spi|软件SPI|待测试|

## 如何使用

在Keil中导入src目录中的所有源文件并将inc目录添加到包含目录, 然后从template/config.h复制一份配置文件到你的工程中即可

sdcc需要自行编写Makefile, 示例请见example/sdcc

## 版权声明

此 STC89 软件库 采用MIT协议开源, 在本库编写的过程中还参考了STM32标准外设库, STC的一些软件库, [HML_FwLib_STC89](https://github.com/MCU-ZHISHAN-IoT/HML_FwLib_STC89)以及网上搜索的一些相关资料, 在此对这些库和作者表示由衷的感谢.
